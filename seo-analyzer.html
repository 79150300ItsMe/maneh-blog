<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maneh Blog - SEO Analyzer</title>
    <meta name="description" content="SEO analysis tool for Maneh Blog main page">
    <meta name="robots" content="noindex, nofollow">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background: #2196F3; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .test-section { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .test-item { margin: 10px 0; padding: 15px; border-left: 4px solid #ddd; border-radius: 4px; }
        .test-pass { border-left-color: #4CAF50; background: #f1f8e9; }
        .test-fail { border-left-color: #f44336; background: #ffebee; }
        .test-warning { border-left-color: #ff9800; background: #fff3e0; }
        .test-title { font-weight: bold; margin-bottom: 5px; font-size: 16px; }
        .test-desc { color: #666; font-size: 14px; margin-bottom: 8px; }
        .test-result { font-family: monospace; background: #f8f9fa; padding: 8px; border-radius: 4px; font-size: 13px; }
        .score-display { text-align: center; padding: 20px; }
        .score-number { font-size: 48px; font-weight: bold; margin: 10px 0; }
        .score-excellent { color: #4CAF50; }
        .score-good { color: #8BC34A; }
        .score-fair { color: #FFC107; }
        .score-poor { color: #f44336; }
        .btn { background: #2196F3; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
        .btn:hover { background: #1976D2; }
        .iframe-container { width: 100%; height: 600px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
        .iframe-container iframe { width: 100%; height: 100%; border: none; }
        .loading { text-align: center; padding: 40px; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Maneh Blog - SEO Analyzer</h1>
            <p>Analyze the main blog page for SEO optimization</p>
            <button class="btn" onclick="analyzeMainPage()">Analyze Main Page</button>
            <button class="btn" onclick="analyzeCurrentPage()">Analyze Current Page</button>
            <button class="btn" onclick="clearResults()">Clear Results</button>
        </div>

        <div id="scoreSection" class="test-section" style="display: none;">
            <h2>üìä SEO Score</h2>
            <div id="scoreDisplay" class="score-display">
                <div id="scoreNumber" class="score-number">-</div>
                <div id="scoreDetails"></div>
            </div>
        </div>

        <div id="resultsContainer"></div>

        <div class="test-section">
            <h2>üìã Analysis Options</h2>
            <p>Choose what to analyze:</p>
            <button class="btn" onclick="loadMainPage()">Load Main Page in Frame</button>
            <button class="btn" onclick="analyzeFromURL('index.html')">Analyze index.html</button>
            <button class="btn" onclick="analyzeFromURL('seo-test.html')">Analyze seo-test.html</button>
        </div>

        <div id="iframeSection" class="test-section" style="display: none;">
            <h2>üìÑ Page Preview</h2>
            <div class="iframe-container">
                <iframe id="pageFrame" src="about:blank"></iframe>
            </div>
        </div>
    </div>

    <script>
        let currentScore = 0;
        let maxScore = 100;
        let testResults = [];

        function addTest(category, title, description, status, result = '', points = 0) {
            const test = { category, title, description, status, result, points, timestamp: new Date() };
            testResults.push(test);
            
            if (status === 'pass') currentScore += points;
            else if (status === 'warning') currentScore += points * 0.5;
            
            renderTest(category, test);
        }

        function renderTest(category, test) {
            let container = document.getElementById(category + 'Results');
            if (!container) {
                // Create category section if it doesn't exist
                const section = document.createElement('div');
                section.className = 'test-section';
                section.innerHTML = `<h2>${getCategoryTitle(category)}</h2><div id="${category}Results"></div>`;
                document.getElementById('resultsContainer').appendChild(section);
                container = document.getElementById(category + 'Results');
            }
            
            const div = document.createElement('div');
            div.className = `test-item test-${test.status}`;
            div.innerHTML = `
                <div class="test-title">${test.title} ${test.points > 0 ? `(+${test.points})` : ''}</div>
                <div class="test-desc">${test.description}</div>
                <div class="test-result">${test.result}</div>
            `;
            container.appendChild(div);
        }

        function getCategoryTitle(category) {
            const titles = {
                'meta': 'üîç Meta Tags Analysis',
                'structured': 'üìã Structured Data Analysis',
                'performance': 'üöÄ Performance Analysis',
                'mobile': 'üì± Mobile & Accessibility',
                'linking': 'üîó Internal Linking',
                'content': 'üìù Content Analysis'
            };
            return titles[category] || category;
        }

        function updateScore() {
            const percentage = Math.round((currentScore / maxScore) * 100);
            const scoreElement = document.getElementById('scoreNumber');
            const detailsElement = document.getElementById('scoreDetails');
            
            let scoreClass = 'score-poor';
            let grade = 'D';
            let status = 'Needs Improvement';
            
            if (percentage >= 90) {
                scoreClass = 'score-excellent';
                grade = 'A+';
                status = 'Excellent SEO';
            } else if (percentage >= 80) {
                scoreClass = 'score-good';
                grade = 'A';
                status = 'Good SEO';
            } else if (percentage >= 70) {
                scoreClass = 'score-fair';
                grade = 'B';
                status = 'Fair SEO';
            } else if (percentage >= 60) {
                grade = 'C';
                status = 'Needs Work';
            }
            
            scoreElement.innerHTML = `<span class="${scoreClass}">${percentage}/100</span>`;
            detailsElement.innerHTML = `
                <p><strong>Current Score:</strong> ${currentScore}/${maxScore} points</p>
                <p><strong>Grade:</strong> ${grade}</p>
                <p><strong>Status:</strong> ${status}</p>
            `;
            
            document.getElementById('scoreSection').style.display = 'block';
        }

        function clearResults() {
            document.getElementById('resultsContainer').innerHTML = '';
            document.getElementById('scoreSection').style.display = 'none';
            testResults = [];
            currentScore = 0;
        }

        function loadMainPage() {
            document.getElementById('pageFrame').src = 'index.html';
            document.getElementById('iframeSection').style.display = 'block';
        }

        function analyzeFromURL(url) {
            console.log('Analyzing URL:', url);
            fetch(url)
                .then(response => {
                    console.log('Response status:', response.status);
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    return response.text();
                })
                .then(html => {
                    console.log('HTML loaded, length:', html.length);
                    console.log('HTML preview:', html.substring(0, 200) + '...');
                    
                    // Create a temporary DOM to analyze
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    
                    // Check what we're analyzing
                    const title = doc.querySelector('title');
                    console.log('Document title:', title ? title.textContent : 'No title found');
                    
                    analyzeDocument(doc);
                })
                .catch(error => {
                    console.error('Error loading page:', error);
                    addTest('meta', 'Page Load', 'Load page for analysis', 'fail', `Error: ${error.message}`, 0);
                    updateScore();
                });
        }

        function analyzeMainPage() {
            // Show loading message
            document.getElementById('resultsContainer').innerHTML = `
                <div class="test-section">
                    <div class="loading">
                        <h3>üîç Analyzing Main Page (index.html)...</h3>
                        <p>Please wait while we analyze the SEO of your main blog page.</p>
                    </div>
                </div>
            `;
            
            // Analyze index.html
            analyzeFromURL('index.html');
        }

        function analyzeCurrentPage() {
            analyzeDocument(document);
        }

        function analyzeDocument(doc) {
            clearResults();
            
            // Meta Tags Analysis
            analyzeMetaTags(doc);
            
            // Structured Data Analysis
            analyzeStructuredData(doc);
            
            // Performance Analysis
            analyzePerformance(doc);
            
            // Mobile & Accessibility
            analyzeMobileAccessibility(doc);
            
            // Content Analysis
            analyzeContent(doc);
            
            // Internal Linking
            analyzeLinking(doc);
            
            updateScore();
        }

        function analyzeMetaTags(doc) {
            // Title tag
            const title = doc.querySelector('title');
            if (title && title.textContent.length > 0) {
                if (title.textContent.length >= 30 && title.textContent.length <= 60) {
                    addTest('meta', 'Title Tag', 'Check title tag length and content', 'pass', 
                        `Title: "${title.textContent}" (${title.textContent.length} chars)`, 5);
                } else {
                    addTest('meta', 'Title Tag', 'Check title tag length and content', 'warning', 
                        `Title: "${title.textContent}" (${title.textContent.length} chars) - Should be 30-60 characters`, 2);
                }
            } else {
                addTest('meta', 'Title Tag', 'Check title tag length and content', 'fail', 'No title tag found', 0);
            }

            // Meta description
            const description = doc.querySelector('meta[name="description"]');
            if (description && description.content.length > 0) {
                if (description.content.length >= 120 && description.content.length <= 160) {
                    addTest('meta', 'Meta Description', 'Check meta description length and content', 'pass', 
                        `Description: "${description.content}" (${description.content.length} chars)`, 5);
                } else {
                    addTest('meta', 'Meta Description', 'Check meta description length and content', 'warning', 
                        `Description: "${description.content}" (${description.content.length} chars) - Should be 120-160 characters`, 2);
                }
            } else {
                addTest('meta', 'Meta Description', 'Check meta description length and content', 'fail', 'No meta description found', 0);
            }

            // Keywords
            const keywords = doc.querySelector('meta[name="keywords"]');
            if (keywords && keywords.content.length > 0) {
                addTest('meta', 'Meta Keywords', 'Check meta keywords', 'pass', 
                    `Keywords: "${keywords.content}"`, 3);
            } else {
                addTest('meta', 'Meta Keywords', 'Check meta keywords', 'warning', 'No meta keywords found', 1);
            }

            // Open Graph tags
            const ogTitle = doc.querySelector('meta[property="og:title"]');
            const ogDesc = doc.querySelector('meta[property="og:description"]');
            const ogImage = doc.querySelector('meta[property="og:image"]');
            const ogUrl = doc.querySelector('meta[property="og:url"]');
            
            if (ogTitle && ogDesc && ogImage && ogUrl) {
                addTest('meta', 'Open Graph Tags', 'Check Open Graph meta tags', 'pass', 
                    'All Open Graph tags present', 5);
            } else {
                addTest('meta', 'Open Graph Tags', 'Check Open Graph meta tags', 'fail', 
                    'Missing Open Graph tags', 0);
            }

            // Twitter Card tags
            const twitterCard = doc.querySelector('meta[name="twitter:card"]');
            const twitterTitle = doc.querySelector('meta[name="twitter:title"]');
            const twitterDesc = doc.querySelector('meta[name="twitter:description"]');
            const twitterImage = doc.querySelector('meta[name="twitter:image"]');
            
            if (twitterCard && twitterTitle && twitterDesc && twitterImage) {
                addTest('meta', 'Twitter Card Tags', 'Check Twitter Card meta tags', 'pass', 
                    'All Twitter Card tags present', 3);
            } else {
                addTest('meta', 'Twitter Card Tags', 'Check Twitter Card meta tags', 'warning', 
                    'Some Twitter Card tags missing', 1);
            }

            // Canonical URL
            const canonical = doc.querySelector('link[rel="canonical"]');
            if (canonical && canonical.href) {
                addTest('meta', 'Canonical URL', 'Check canonical URL', 'pass', 
                    `Canonical: ${canonical.href}`, 3);
            } else {
                addTest('meta', 'Canonical URL', 'Check canonical URL', 'fail', 'No canonical URL found', 0);
            }
        }

        function analyzeStructuredData(doc) {
            const jsonLdScripts = doc.querySelectorAll('script[type="application/ld+json"]');
            
            if (jsonLdScripts.length > 0) {
                addTest('structured', 'JSON-LD Scripts', 'Check for structured data', 'pass', 
                    `${jsonLdScripts.length} JSON-LD script(s) found`, 5);
                
                // Check for specific schema types
                let hasOrganization = false;
                let hasWebSite = false;
                let hasArticle = false;
                
                jsonLdScripts.forEach(script => {
                    try {
                        const data = JSON.parse(script.textContent);
                        if (data['@type'] === 'Organization') hasOrganization = true;
                        if (data['@type'] === 'WebSite') hasWebSite = true;
                        if (data['@type'] === 'Article') hasArticle = true;
                    } catch (e) {
                        console.warn('Invalid JSON-LD:', e);
                    }
                });
                
                if (hasOrganization) {
                    addTest('structured', 'Organization Schema', 'Check for Organization structured data', 'pass', 
                        'Organization schema found', 3);
                } else {
                    addTest('structured', 'Organization Schema', 'Check for Organization structured data', 'warning', 
                        'Organization schema not found', 1);
                }
                
                if (hasWebSite) {
                    addTest('structured', 'WebSite Schema', 'Check for WebSite structured data', 'pass', 
                        'WebSite schema found', 3);
                } else {
                    addTest('structured', 'WebSite Schema', 'Check for WebSite structured data', 'warning', 
                        'WebSite schema not found', 1);
                }
                
                if (hasArticle) {
                    addTest('structured', 'Article Schema', 'Check for Article structured data', 'pass', 
                        'Article schema found', 3);
                } else {
                    addTest('structured', 'Article Schema', 'Check for Article structured data', 'info', 
                        'Article schema not found (normal for home page)', 0);
                }
            } else {
                addTest('structured', 'JSON-LD Scripts', 'Check for structured data', 'fail', 
                    'No JSON-LD scripts found', 0);
            }
        }

        function analyzePerformance(doc) {
            // Check for preload hints
            const preloadLinks = doc.querySelectorAll('link[rel="preload"]');
            if (preloadLinks.length > 0) {
                addTest('performance', 'Resource Preloading', 'Check for preload hints', 'pass', 
                    `${preloadLinks.length} preload hint(s) found`, 3);
            } else {
                addTest('performance', 'Resource Preloading', 'Check for preload hints', 'warning', 
                    'No preload hints found', 1);
            }

            // Check for DNS prefetch
            const dnsPrefetch = doc.querySelectorAll('link[rel="dns-prefetch"]');
            if (dnsPrefetch.length > 0) {
                addTest('performance', 'DNS Prefetch', 'Check for DNS prefetch hints', 'pass', 
                    `${dnsPrefetch.length} DNS prefetch hint(s) found`, 2);
            } else {
                addTest('performance', 'DNS Prefetch', 'Check for DNS prefetch hints', 'warning', 
                    'No DNS prefetch hints found', 0);
            }

            // Check for font optimization
            const fontLinks = doc.querySelectorAll('link[href*="fonts.googleapis.com"]');
            let hasFontOptimization = false;
            fontLinks.forEach(link => {
                if (link.media === 'print' && link.onload) {
                    hasFontOptimization = true;
                }
            });
            
            if (hasFontOptimization) {
                addTest('performance', 'Font Optimization', 'Check for font loading optimization', 'pass', 
                    'Fonts optimized with print media and onload', 3);
            } else {
                addTest('performance', 'Font Optimization', 'Check for font loading optimization', 'warning', 
                    'Fonts not optimized', 1);
            }

            // Check for image optimization
            const images = doc.querySelectorAll('img');
            let optimizedImages = 0;
            images.forEach(img => {
                if (img.loading === 'lazy' && img.decoding === 'async') {
                    optimizedImages++;
                }
            });
            
            if (images.length > 0) {
                const optimizationRatio = optimizedImages / images.length;
                if (optimizationRatio >= 0.8) {
                    addTest('performance', 'Image Optimization', 'Check for image loading optimization', 'pass', 
                        `${optimizedImages}/${images.length} images optimized`, 3);
                } else {
                    addTest('performance', 'Image Optimization', 'Check for image loading optimization', 'warning', 
                        `${optimizedImages}/${images.length} images optimized`, 1);
                }
            }
        }

        function analyzeMobileAccessibility(doc) {
            // Viewport meta tag
            const viewport = doc.querySelector('meta[name="viewport"]');
            if (viewport && viewport.content.includes('width=device-width')) {
                addTest('mobile', 'Viewport Meta Tag', 'Check for responsive viewport', 'pass', 
                    'Viewport meta tag configured correctly', 3);
            } else {
                addTest('mobile', 'Viewport Meta Tag', 'Check for responsive viewport', 'fail', 
                    'Viewport meta tag missing or incorrect', 0);
            }

            // Language attribute
            const htmlLang = doc.documentElement.lang;
            if (htmlLang) {
                addTest('mobile', 'Language Attribute', 'Check for language attribute', 'pass', 
                    `Language: ${htmlLang}`, 2);
            } else {
                addTest('mobile', 'Language Attribute', 'Check for language attribute', 'warning', 
                    'No language attribute found', 1);
            }

            // Theme color
            const themeColor = doc.querySelector('meta[name="theme-color"]');
            if (themeColor) {
                addTest('mobile', 'Theme Color', 'Check for theme color', 'pass', 
                    `Theme color: ${themeColor.content}`, 2);
            } else {
                addTest('mobile', 'Theme Color', 'Check for theme color', 'warning', 
                    'No theme color found', 0);
            }

            // Check for alt attributes on images
            const images = doc.querySelectorAll('img');
            let imagesWithAlt = 0;
            images.forEach(img => {
                if (img.alt && img.alt.trim().length > 0) {
                    imagesWithAlt++;
                }
            });
            
            if (images.length > 0) {
                const altRatio = imagesWithAlt / images.length;
                if (altRatio >= 0.8) {
                    addTest('mobile', 'Image Alt Text', 'Check for image alt attributes', 'pass', 
                        `${imagesWithAlt}/${images.length} images have alt text`, 3);
                } else {
                    addTest('mobile', 'Image Alt Text', 'Check for image alt attributes', 'warning', 
                        `${imagesWithAlt}/${images.length} images have alt text`, 1);
                }
            }
        }

        function analyzeContent(doc) {
            // Check for headings structure
            const h1s = doc.querySelectorAll('h1');
            const h2s = doc.querySelectorAll('h2');
            const h3s = doc.querySelectorAll('h3');
            
            if (h1s.length === 1) {
                addTest('content', 'H1 Structure', 'Check for proper H1 structure', 'pass', 
                    `1 H1 found: "${h1s[0].textContent}"`, 3);
            } else if (h1s.length > 1) {
                addTest('content', 'H1 Structure', 'Check for proper H1 structure', 'warning', 
                    `${h1s.length} H1 tags found - should be only 1`, 1);
            } else {
                addTest('content', 'H1 Structure', 'Check for proper H1 structure', 'fail', 
                    'No H1 tag found', 0);
            }

            // Check for content length
            const bodyText = doc.body ? doc.body.textContent.replace(/\s+/g, ' ').trim() : '';
            const wordCount = bodyText.split(' ').length;
            
            if (wordCount >= 300) {
                addTest('content', 'Content Length', 'Check for sufficient content', 'pass', 
                    `${wordCount} words found`, 3);
            } else {
                addTest('content', 'Content Length', 'Check for sufficient content', 'warning', 
                    `${wordCount} words found - aim for 300+ words`, 1);
            }
        }

        function analyzeLinking(doc) {
            const links = doc.querySelectorAll('a[href]');
            let internalLinks = 0;
            let externalLinks = 0;
            
            links.forEach(link => {
                const href = link.href;
                if (href.includes('maneh.blog') || href.startsWith('/') || href.startsWith('#')) {
                    internalLinks++;
                } else if (href.startsWith('http')) {
                    externalLinks++;
                }
            });
            
            if (internalLinks > 0) {
                addTest('linking', 'Internal Links', 'Check for internal linking', 'pass', 
                    `${internalLinks} internal link(s) found`, 3);
            } else {
                addTest('linking', 'Internal Links', 'Check for internal linking', 'warning', 
                    'No internal links found', 1);
            }
            
            if (externalLinks > 0) {
                addTest('linking', 'External Links', 'Check for external linking', 'pass', 
                    `${externalLinks} external link(s) found`, 2);
            } else {
                addTest('linking', 'External Links', 'Check for external linking', 'info', 
                    'No external links found', 0);
            }
        }

        // Auto-analyze on page load
        window.addEventListener('load', function() {
            setTimeout(() => {
                // Don't auto-analyze, let user choose
                document.getElementById('resultsContainer').innerHTML = `
                    <div class="test-section">
                        <h2>üéØ Ready to Analyze</h2>
                        <p>Click "Analyze Main Page" to test the main blog page SEO, or choose another option below.</p>
                        <div style="text-align: center; margin: 20px 0;">
                            <button class="btn" onclick="analyzeMainPage()" style="font-size: 16px; padding: 15px 30px;">üîç Analyze Main Page (index.html)</button>
                        </div>
                    </div>
                `;
            }, 500);
        });
    </script>
</body>
</html>
