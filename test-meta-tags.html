<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta Tags Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .pass { background-color: #d4edda; border-color: #c3e6cb; }
        .fail { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        #results { margin-top: 20px; }
        .meta-tag { margin: 5px 0; padding: 5px; background: #f8f9fa; border-radius: 3px; font-family: monospace; }
        .meta-tag.present { background: #d4edda; }
        .meta-tag.missing { background: #f8d7da; }
        .meta-tag.duplicate { background: #fff3cd; }
    </style>
</head>
<body>
    <h1>Meta Tags Test</h1>
    
    <div class="test-section info">
        <h3>Test Instructions</h3>
        <p>1. Open this page in the same domain as your blog</p>
        <p>2. Click "Test Meta Tags" to verify all meta tags</p>
        <p>3. Check console for detailed results</p>
    </div>
    
    <div class="test-section">
        <h3>Test Controls</h3>
        <button onclick="testAllMetaTags()">Test All Meta Tags</button>
        <button onclick="testTitle()">Test Title</button>
        <button onclick="testDescription()">Test Description</button>
        <button onclick="testCanonical()">Test Canonical</button>
        <button onclick="testOpenGraph()">Test Open Graph</button>
        <button onclick="testTwitter()">Test Twitter</button>
        <button onclick="testRobots()">Test Robots</button>
        <button onclick="clearResults()">Clear Results</button>
    </div>
    
    <div id="results"></div>

    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `test-section ${type}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            results.appendChild(div);
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        function testTitle() {
            log('Testing Title...', 'info');
            
            const title = document.title;
            if (title) {
                log(`✓ Title found: "${title}"`, 'pass');
                
                if (title.length <= 65) {
                    log(`✓ Title length OK: ${title.length}/65 characters`, 'pass');
                } else {
                    log(`✗ Title too long: ${title.length}/65 characters`, 'fail');
                }
            } else {
                log('✗ No title found', 'fail');
            }
        }

        function testDescription() {
            log('Testing Description...', 'info');
            
            const descriptions = document.querySelectorAll('meta[name="description"]');
            
            if (descriptions.length === 0) {
                log('✗ No meta description found', 'fail');
                return;
            }
            
            if (descriptions.length === 1) {
                log('✓ Meta description is unique', 'pass');
            } else {
                log(`✗ Meta description duplicated (${descriptions.length} instances)`, 'fail');
            }
            
            const desc = descriptions[0];
            if (desc.content) {
                log(`✓ Description found: "${desc.content}"`, 'pass');
                
                if (desc.content.length <= 155) {
                    log(`✓ Description length OK: ${desc.content.length}/155 characters`, 'pass');
                } else {
                    log(`✗ Description too long: ${desc.content.length}/155 characters`, 'fail');
                }
            } else {
                log('✗ Description has no content', 'fail');
            }
        }

        function testCanonical() {
            log('Testing Canonical...', 'info');
            
            const canonicals = document.querySelectorAll('link[rel="canonical"]');
            
            if (canonicals.length === 0) {
                log('✗ No canonical link found', 'fail');
                return;
            }
            
            if (canonicals.length === 1) {
                log('✓ Canonical link is unique', 'pass');
            } else {
                log(`✗ Canonical link duplicated (${canonicals.length} instances)`, 'fail');
            }
            
            const canon = canonicals[0];
            if (canon.href) {
                log(`✓ Canonical found: "${canon.href}"`, 'pass');
                
                // Check if canonical is absolute URL
                if (canon.href.startsWith('http')) {
                    log('✓ Canonical is absolute URL', 'pass');
                } else {
                    log('✗ Canonical is not absolute URL', 'fail');
                }
            } else {
                log('✗ Canonical has no href', 'fail');
            }
        }

        function testOpenGraph() {
            log('Testing Open Graph...', 'info');
            
            const ogTags = [
                { property: 'og:type', required: true },
                { property: 'og:title', required: true },
                { property: 'og:description', required: true },
                { property: 'og:url', required: true },
                { property: 'og:image', required: true }
            ];
            
            let foundTags = 0;
            ogTags.forEach(tag => {
                const element = document.querySelector(`meta[property="${tag.property}"]`);
                if (element && element.content) {
                    log(`✓ ${tag.property}: "${element.content}"`, 'pass');
                    foundTags++;
                } else {
                    log(`✗ ${tag.property} missing or empty`, 'fail');
                }
            });
            
            if (foundTags === ogTags.length) {
                log('✓ All Open Graph tags present', 'pass');
            } else {
                log(`✗ Only ${foundTags}/${ogTags.length} Open Graph tags found`, 'fail');
            }
        }

        function testTwitter() {
            log('Testing Twitter Cards...', 'info');
            
            const twitterTags = [
                { name: 'twitter:card', required: true },
                { name: 'twitter:title', required: true },
                { name: 'twitter:description', required: true },
                { name: 'twitter:image', required: true }
            ];
            
            let foundTags = 0;
            twitterTags.forEach(tag => {
                const element = document.querySelector(`meta[name="${tag.name}"]`);
                if (element && element.content) {
                    log(`✓ ${tag.name}: "${element.content}"`, 'pass');
                    foundTags++;
                } else {
                    log(`✗ ${tag.name} missing or empty`, 'fail');
                }
            });
            
            if (foundTags === twitterTags.length) {
                log('✓ All Twitter Card tags present', 'pass');
            } else {
                log(`✗ Only ${foundTags}/${twitterTags.length} Twitter Card tags found`, 'fail');
            }
        }

        function testRobots() {
            log('Testing Robots...', 'info');
            
            const robots = document.querySelector('meta[name="robots"]');
            if (robots) {
                log(`✓ Robots meta found: "${robots.content}"`, 'pass');
                
                // Check if we're in production
                const isProduction = !['localhost', '127.0.0.1'].includes(location.hostname);
                if (isProduction) {
                    if (robots.content.includes('index') && robots.content.includes('follow')) {
                        log('✓ Robots meta correct for production', 'pass');
                    } else {
                        log('✗ Robots meta incorrect for production', 'fail');
                    }
                } else {
                    log('✓ Robots meta present in development (OK)', 'pass');
                }
            } else {
                log('✗ No robots meta found', 'fail');
            }
        }

        function testAllMetaTags() {
            log('Testing All Meta Tags...', 'info');
            clearResults();
            
            testTitle();
            testDescription();
            testCanonical();
            testOpenGraph();
            testTwitter();
            testRobots();
            
            log('Meta tags testing complete!', 'info');
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        // Auto-run basic tests on load
        window.addEventListener('load', () => {
            log('Meta Tags Test loaded', 'info');
            log('Click "Test All Meta Tags" to start verification', 'info');
        });
    </script>
</body>
</html>
